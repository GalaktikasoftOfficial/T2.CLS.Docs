(window.webpackJsonp=window.webpackJsonp||[]).push([[21],{396:function(t,e,s){"use strict";s.r(e);var n=s(42),a=Object(n.a)({},(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h2",{attrs:{id:"конфигурирование-транспорта"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#конфигурирование-транспорта"}},[t._v("#")]),t._v(" Конфигурирование транспорта")]),t._v(" "),s("h3",{attrs:{id:"appsetings-json"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#appsetings-json"}},[t._v("#")]),t._v(" appsetings.json")]),t._v(" "),s("p",[t._v("Пример конфигурации:")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v('{\n\t"AllowedHosts": "*",\n\t"Transport": {\n\t\t"ValidateInputData": true\n\t},\n\t"Logging": {\n\t\t"LogLevel": {\n\t\t\t"Default": "Warning",\n\t\t\t"Microsoft": "Warning",\n\t\t\t"Microsoft.Hosting.Lifetime": "Warning"\n\t\t}\n\t},\n\t"BufferSettings": {\n\t\t"BufferPath": "LogBuffer",\n\t\t"WorkerCount": 1,\n\t\t"ReadLimit": 1024,\n\t\t"MemoryBufferLimit": 512,\n\t\t"FileBufferLimit": 0,\n\t\t"FlushTimeout": 3000,\n\t\t"ResendTimeout": 10000,\n\t\t"OutputPlugins": [ ...  ]\n\t}\n}\n')])])]),s("p",[t._v("Описание параметров:")]),t._v(" "),s("h4",{attrs:{id:"секция-allowedhosts"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#секция-allowedhosts"}},[t._v("#")]),t._v(" Секция "),s("strong",[t._v("AllowedHosts")])]),t._v(" "),s("p",[t._v("Заголовки хостов, которым разрешен доступ к этому сервису.")]),t._v(" "),s("p",[t._v("Номера портов необходимо исключить.")]),t._v(" "),s("p",[t._v("Подстановочный знак верхнего уровня "),s("code",[t._v("«*»")]),t._v(" разрешает все непустые хосты.")]),t._v(" "),s("p",[t._v("Подстановочные знаки субдоменов разрешены. Например. "),s("code",[t._v("«* .example.com»")]),t._v(" соответствует субдоменам, таким как "),s("code",[t._v("foo.example.com")]),t._v(", но не родительскому домену "),s("code",[t._v("example.com.")])]),t._v(" "),s("h4",{attrs:{id:"секция-transport"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#секция-transport"}},[t._v("#")]),t._v(" Секция "),s("strong",[t._v("Transport")])]),t._v(" "),s("p",[t._v("Настройки обработки данных транспортом:")]),t._v(" "),s("ul",[s("li",[t._v("ValidateInputData - проверять на целлостность входящих данных. Принимает значения: true/false.")])]),t._v(" "),s("h4",{attrs:{id:"секция-buffersettings"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#секция-buffersettings"}},[t._v("#")]),t._v(" Секция "),s("strong",[t._v("BufferSettings")])]),t._v(" "),s("p",[t._v("Данная секция настраивает файловый буфер сервиса.")]),t._v(" "),s("ul",[s("li",[t._v("BufferPath - место хранения файлового буфера. Путь указывается относительно запускаемого приложения или полный путь.")]),t._v(" "),s("li",[t._v("WorkerCount - указывается максимальное количество потоков, которые обрабатывают лог-записи. Предпочитаемые значения от 1 до 4 в зависимости от характеристики сервера.")]),t._v(" "),s("li",[t._v("ReadLimit -")]),t._v(" "),s("li",[t._v("MemoryBufferLimit -")]),t._v(" "),s("li",[t._v("FileBufferLimit -")]),t._v(" "),s("li",[t._v("FlushTimeout -")]),t._v(" "),s("li",[t._v("ResendTimeout -")]),t._v(" "),s("li",[t._v("OutputPlugins - массив настроек для выходных данных. В данном массиве отдельными объектами прописываются настройки для каждой логируемой системы. Сервис может работать в комбинированном режиме.")])]),t._v(" "),s("h2",{attrs:{id:"конфигурация-для-forward"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#конфигурация-для-forward"}},[t._v("#")]),t._v(" Конфигурация для "),s("strong",[t._v("Forward")])]),t._v(" "),s("p",[t._v("Сервис в режиме Forwarder занимается перенаправлением данных на сервисы транспорта в режиме Worker")]),t._v(" "),s("p",[t._v("Конфигурирование можно выполнять в нескольких файлах:")]),t._v(" "),s("ul",[s("li",[t._v("appsetings.json - изменение стандартной конфигурации. Для этого добавляется секция OutputPlugins")]),t._v(" "),s("li",[t._v("appsetings.{Environment}.json - переопределение стандартной конфигурации. В корне необходимо разместить секцию OutputPlugins")]),t._v(" "),s("li",[t._v("appsetings.Forwarder.json - дополнение к стандартной конфигурации. Для применения конфигурации требуется запустить сервис с параметром "),s("code",[t._v("--forwarder")])])]),t._v(" "),s("p",[t._v("Пример конфигурации для работы сервиса в режиме Forward:")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v('{\n  "OutputPlugins": [\n    {\n      "Output": "Forward",\n      "System": "CLS",\n      "Servers": [\n        "http://localhost:5100",\n        "http://localhost:5101",\n        "http://localhost:5102",\n        "http://localhost:5103"\n      ] \n    }\n  ]\n}\n')])])]),s("p",[t._v("Описание параметров:")]),t._v(" "),s("ul",[s("li",[t._v('Output - Тип плагина. Фиксированное значение "Forward"')]),t._v(" "),s("li",[t._v("System - Наименование логируемой системы.")]),t._v(" "),s("li",[t._v("Servers - массив url-адресов для перенаправления пакетов. В списке могут быть сервисы в режиме и Worker Forward")])]),t._v(" "),s("h2",{attrs:{id:"конфигурация-для-worker"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#конфигурация-для-worker"}},[t._v("#")]),t._v(" Конфигурация для "),s("strong",[t._v("Worker")])]),t._v(" "),s("p",[t._v("Пример конфигурации для работы сервиса в режиме Worker:")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v('{\n\t"OutputPlugins": [\n\t\t{\n\t\t\t"Output": "Clickhouse",\n\t\t\t"System": "CLS",\n\t\t\t"Host": "by01-vm42.topsoft.local",\n\t\t\t"Port": 8123,\n\t\t\t"Database": "T2P_Logs",\n\t\t\t"Table": "CLS",\n\t\t\t"User": "default",\n\t\t\t"Password": "topsoft",\n\t\t\t"Columns": [\n\t\t\t\t"EventTime",\n\t\t\t\t"EventTimeTics",\n\t\t\t\t"TimeZone",\n\t\t\t\t"SystemTag",\n\t\t\t\t"MachineName",\n\t\t\t\t"ProcessId",\n\t\t\t\t"ThreadId",\n\t\t\t\t"EnvironmentUserName",\n\t\t\t\t"Level",\n\t\t\t\t"SourceContext",\n\t\t\t\t"Message",\n\t\t\t\t"Exception"\n\t\t\t]\n\t\t}\n\t]\n}\n')])])]),s("p",[t._v("Описание параметров:")]),t._v(" "),s("ul",[s("li",[t._v('Output - Тип плагина. Фиксированное значение "Clickhouse"')]),t._v(" "),s("li",[t._v("System - Наименование логируемой системы.")]),t._v(" "),s("li",[t._v("Host - Адрес к Clickhouse")]),t._v(" "),s("li",[t._v("Port - Порт к Clickhouse")]),t._v(" "),s("li",[t._v("Database - Наименование базы данных, в которой будет храниться лог")]),t._v(" "),s("li",[t._v("Table - Наименование таблицы, в которой будет храниться лог")]),t._v(" "),s("li",[t._v("User - Имя пользователя, под которым будет осуществляться доступ к базе данных ClickHouse")]),t._v(" "),s("li",[t._v("Password - пароль для пользователя")]),t._v(" "),s("li",[t._v("Columns - массив атрибутов, которые будут сохраняться в базу данных. Колонки в таблице должны соответствовать наименованиями.")])])])}),[],!1,null,null,null);e.default=a.exports}}]);