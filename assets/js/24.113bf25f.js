(window.webpackJsonp=window.webpackJsonp||[]).push([[24],{392:function(e,n,t){"use strict";t.r(n);var a=t(42),s=Object(a.a)({},(function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[t("h2",[e._v(" Конфигурирование сервиса хранения ")]),e._v(" "),t("h3",{attrs:{id:"apsettings-json"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#apsettings-json"}},[e._v("#")]),e._v(" apsettings.json")]),e._v(" "),t("h4",{attrs:{id:"конфигурация-по-умолчанию"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#конфигурация-по-умолчанию"}},[e._v("#")]),e._v(" Конфигурация по умолчанию:")]),e._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v('{\n    "Logging": {\n        "LogLevel": {\n            "Default": "Debug",\n            "System": "Information",\n            "Microsoft": "Information"\n        }\n    },\n    "AllowedHosts": "*",\n    "Storage": {\n        "HttpUrl": "http://192.168.208.3:8123/",\n        "User": "default",\n        "Password": "topsoft",\n        "DataBase": "T2PLogs",\n        "DataPath": "/var/lib/clickhouse/data",\n        "ArchivePath": "/var/lib/clickhouse/archive"\n    }\n}\n')])])]),t("h4",{attrs:{id:"секция-logging"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#секция-logging"}},[e._v("#")]),e._v(" Секция Logging")]),e._v(" "),t("p",[e._v("Сексия Logging отвечает за минимальный уровень логирования по источникам.")]),e._v(" "),t("p",[e._v("Возможные варианты уровня логирования:")]),e._v(" "),t("ul",[t("li",[e._v("Trace")]),e._v(" "),t("li",[e._v("Debug")]),e._v(" "),t("li",[e._v("Information")]),e._v(" "),t("li",[e._v("Warning")]),e._v(" "),t("li",[e._v("Error")]),e._v(" "),t("li",[e._v("Critical")]),e._v(" "),t("li",[e._v("None")])]),e._v(" "),t("h4",{attrs:{id:"секция-allowedhosts"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#секция-allowedhosts"}},[e._v("#")]),e._v(" Секция AllowedHosts")]),e._v(" "),t("p",[e._v("Заголовки хостов, которым разрешен доступ к этому сервису.")]),e._v(" "),t("p",[e._v("Номера портов необходимо исключить.")]),e._v(" "),t("p",[e._v("Подстановочный знак верхнего уровня "),t("code",[e._v("«*»")]),e._v(" разрешает все непустые хосты.")]),e._v(" "),t("p",[e._v("Подстановочные знаки субдоменов разрешены. Например. "),t("code",[e._v("«* .example.com»")]),e._v(" соответствует субдоменам, таким как "),t("code",[e._v("foo.example.com")]),e._v(", но не родительскому домену "),t("code",[e._v("example.com.")])]),e._v(" "),t("h4",{attrs:{id:"секция-storage"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#секция-storage"}},[e._v("#")]),e._v(" Секция Storage")]),e._v(" "),t("p",[e._v("Предназначена для описания параметров подключения к базе данных ClickHouse и доступа к файлам данных.")]),e._v(" "),t("ul",[t("li",[e._v("HttpUrl - url-адрес для доступа к ClickHouse по http/https протоколу.")]),e._v(" "),t("li",[e._v("User - имя пользователя для подключения к ClickHouse.")]),e._v(" "),t("li",[e._v("Password - пароль для пользователя .")]),e._v(" "),t("li",[e._v("DataBase - база данных, которая будет создана и в которой будут размещаться таблицы логов.")]),e._v(" "),t("li",[e._v("DataPath - путь к файлам данных ClickHouse для архивации устаревших партиций.")]),e._v(" "),t("li",[e._v("ArchivePath - путь к месту хранения устаревших партиций.")])]),e._v(" "),t("h3",{attrs:{id:"фаилы-конфигурации-логируемых-систем"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#фаилы-конфигурации-логируемых-систем"}},[e._v("#")]),e._v(" Файлы конфигурации логируемых систем")]),e._v(" "),t("p",[e._v("Файлы конфигураций систем содержатся в каталоге "),t("code",[e._v("SystemConfig")]),e._v(".")]),e._v(" "),t("p",[e._v("Для каждой системы или части системы относится отдельный файл. Имя файла имеет вид: "),t("code",[e._v("{system_name}.json")])]),e._v(" "),t("p",[e._v("Пример конфигурации:")]),e._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v('{\n  "Name": "CLS",\n  "PartitionLifetime": "30.00:00:00",\n  "DateTimeField": "EventTime",\n  "SortFields": [ "EventTimeTics" ],\n  "Fields": [\n    {\n      "Name": "EventTime",\n      "TypeName": "DateTime"\n    },\n    {\n      "Name": "EventTimeTics",\n      "TypeName": "UInt64"\n    },\n    {\n      "Name": "TimeZone",\n      "TypeName": "String"\n    },\n    {\n      "Name": "SystemTag",\n      "TypeName": "String"\n    },\n    {\n      "Name": "MachineName",\n      "TypeName": "String"\n    },\n    {\n      "Name": "ProcessId",\n      "TypeName": "Int16"\n    },\n    {\n      "Name": "ThreadId",\n      "TypeName": "Int16"\n    },\n    {\n      "Name": "EnvironmentUserName",\n      "TypeName": "String"\n    },\n    {\n      "Name": "Level",\n      "TypeName": "Byte"\n    },\n    {\n      "Name": "SourceContext",\n      "TypeName": "String"\n    },\n    {\n      "Name": "Message",\n      "TypeName": "String"\n    },\n    {\n      "Name": "Exception",\n      "TypeName": "String"\n    }\n  ]\n}\n')])])]),t("p",[e._v("Описание атрибутов:")]),e._v(" "),t("ul",[t("li",[e._v("Name - Наименование системы. В Базе данных ClickHouse будет создана таблица с таким именем.")]),e._v(" "),t("li",[e._v("PartitionLifetime - Время жизни партиции. Имеет формат "),t("code",[e._v("{days}.{hours}:{minutes}.{seconds}")]),e._v(".")]),e._v(" "),t("li",[e._v("DateTimeField  - поле для выполнения партиционирования по дате и времени (чаще всего это время генерации записи лога).")]),e._v(" "),t("li",[e._v("SortFields - поле для сортировки данных (чаще всего это время генерации записи лога в Long формате).")]),e._v(" "),t("li",[e._v("Fields - коллекция полей таблицы\n"),t("ul",[t("li",[e._v("Name - наименование поля")]),e._v(" "),t("li",[e._v("TypeName - тип поля. Возможные варианты: DateTime, Byte, Int16, Int32, Int64, UInt16, UInt32, UInt64, String")])])])])])}),[],!1,null,null,null);n.default=s.exports}}]);